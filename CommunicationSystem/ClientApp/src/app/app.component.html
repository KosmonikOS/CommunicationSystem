<div class="position-fixed start-50 translate-middle-x" style="z-index: 2000;top:10%;">
  <div class="toast" [ngClass]="{'show':toastService.errorShow,'hide':!toastService.errorShow}" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header bg-danger text-white">
      <i class="bi bi-exclamation-triangle" style="font-size:20px"></i>
      <strong class="me-auto" style="padding-left: 8px;font-size: 16px">Ошибка</strong>
      <button type="button" class="btn-close" (click)="toastService.errorShow = false" data-bs-dismiss="toast" aria-label="Закрыть"></button>
    </div>
    <div class="toast-body" style="font-weight: bold;">
      {{toastService.errorMessage}}
    </div>
  </div>
</div>

<div class="position-fixed start-50 translate-middle-x" style="z-index: 2000;top:10%;">
  <div class="toast" [ngClass]="{'show':toastService.successShow,'hide':!toastService.successShow}" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header bg-success text-white">
      <i class="bi bi-check-lg" style="font-size:20px"></i>
      <strong class="me-auto" style="padding-left: 8px;">Успех</strong>
      <button type="button" class="btn-close" (click)="toastService.successShow = false" data-bs-dismiss="toast" aria-label="Закрыть"></button>
    </div>
    <div class="toast-body" style="font-weight: bold;">
      {{toastService.successMessage}}
    </div>
  </div>
</div>

<div class="position-fixed start-50 translate-middle-x" style="z-index: 2000;top:10%;">
  <div class="toast" [ngClass]="{'show':toastService.alertShow,'hide':!toastService.alertShow}" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header bg-warning text-white">
      <i class="bi bi-exclamation-lg" style="font-size:20px"></i>
      <strong class="me-auto" style="padding-left: 8px;">Предупреждение</strong>
      <button type="button" class="btn-close" (click)="toastService.alertShow = false" data-bs-dismiss="toast" aria-label="Закрыть"></button>
    </div>
    <div class="toast-body" style="font-weight: bold;">
      {{toastService.alertMessage}}
    </div>
  </div>
</div>



<header class="header border" id="header" [ngClass]="{'head-pb':isNavOpen}" *ngIf="checkAuth()">
  <div class="header-toggle" (click)="openNav()"> <i class="bi bi-list" [ngClass]="{'bi-x-lg':isNavOpen,'bi-grid-3x3-gap':!isNavOpen}"></i> </div>
  <div class="nav_button" style="padding-top: 0px; margin-right: 20px; cursor: pointer;">
    <a routerLink="/account" class="header_img text-dark ">
      <span class="align-middle" style="line-height:40px;margin-right:10px;font-size:18px">{{accountDataService.currentAccount.nickName}}</span>
      <img src="{{accountDataService.currentAccount.accountImage }}" alt="" />
    </a>
  </div>



</header>
<div class="l-navbar" id="nav-bar" [ngClass]="{'nav-show':isNavOpen}" *ngIf="checkAuth()">
  <nav class="nav">
    <div>
      <a href="#" class="nav_logo">
        <i class="bi bi-at"></i> <span class="nav_logo-name">Communication</span>
      </a>
      <div class="nav_list">
        <a routerLink="/messenger" routerLinkActive="active" class="nav_link nav_button">
          <i class="bi bi-chat-dots"></i>
          <span class="nav_name">Чат</span>
        </a>
        <a routerLink="/videochat" routerLinkActive="active" class="nav_link nav_button">
          <i class="bi bi-camera-video"></i>
          <span class="nav_name">Видео звонки</span>
        </a>
        <a routerLink="{{accountDataService.currentAccount.role == 1 ? '/tests': '/createtests'}}" routerLinkActive="active" class="nav_link nav_button">
           <i class="bi bi-journals"></i>
           <span class="nav_name">Тесты</span>
          </a>
        <div *ngIf="accountDataService.currentAccount.role == 3">
          <a routerLink="/users" routerLinkActive="active" class="nav_link nav_button">
            <i class="bi bi-person-lines-fill"></i>
            <span class="nav_name">Пользователи</span>
          </a>
          <a routerLink="/subjects" routerLinkActive="active" class="nav_link nav_button">
            <i class="bi bi-book"></i>
            <span class="nav_name">Предметы</span>
          </a>
        </div>
</div>
    </div> <a href="#" class="nav_link" (click)="logOut()"> <i class="bi bi-box-arrow-right"></i> <span class="nav_name">Выйти</span> </a>
  </nav>
</div>
<div class="height-100 main-body" [ngClass]="{'body-pd':isNavOpen,'login-form':!checkAuth()}">

  <router-outlet></router-outlet>
</div>


<ng-template #callModal let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Принять вызов от {{videochatDataService.caller.name}} ?</h4>
    <button type="button" class="close" aria-label="Close" (click)="denyCall()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-footer justify-content-center">
    <button type="button" class="btn btn-outline-dark" (click)="modal.close();acceptCall()">Принять</button>
    <button type="button" class="btn btn-outline-dark" (click)="modal.dismiss()">Отклонить</button>
  </div>
</ng-template>
